= ğŸ“ File API
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toclevels: 3
:sectlinks:

[[overview]]
== ê°œìš”: Presigned URLì„ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ

StudyPalsì˜ íŒŒì¼ ì—…ë¡œë“œëŠ” ì„œë²„ì˜ ë¶€í•˜ë¥¼ ì¤„ì´ê³  íš¨ìœ¨ì„±ì„ ë†’ì´ê¸° ìœ„í•´ **Presigned URL** ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì „ì²´ì ì¸ í”„ë¡œì„¸ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

. *Presigned URL ìš”ì²­*: í´ë¼ì´ì–¸íŠ¸ê°€ ì—…ë¡œë“œí•  íŒŒì¼ì˜ ì •ë³´(íŒŒì¼ëª… ë“±)ë¥¼ ì„œë²„ì— ë³´ë‚´ Presigned URLì„ ìš”ì²­í•©ë‹ˆë‹¤.
. *Presigned URL ì‘ë‹µ*: ì„œë²„ëŠ” ìš”ì²­ì„ ê²€ì¦í•œ í›„, ì§€ì •ëœ ì‹œê°„ ë™ì•ˆë§Œ ìœ íš¨í•œ ì—…ë¡œë“œ ì „ìš© URLì„ ìƒì„±í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜í•©ë‹ˆë‹¤. ì´ë•Œ DBì—ëŠ” íŒŒì¼ ë©”íƒ€ë°ì´í„°ê°€ `PENDING` ìƒíƒœë¡œ ë¯¸ë¦¬ ì €ì¥ë©ë‹ˆë‹¤.
. *íŒŒì¼ ì—…ë¡œë“œ*: í´ë¼ì´ì–¸íŠ¸ëŠ” ë°œê¸‰ë°›ì€ Presigned URLë¡œ ìŠ¤í† ë¦¬ì§€(MinIO)ì— ì§ì ‘ íŒŒì¼ ë°ì´í„°ë¥¼ `HTTP PUT` ìš”ì²­ìœ¼ë¡œ ì „ì†¡í•©ë‹ˆë‹¤.
. *ì—…ë¡œë“œ ì™„ë£Œ ì²˜ë¦¬ (í–¥í›„ êµ¬í˜„)*: í´ë¼ì´ì–¸íŠ¸ëŠ” ì—…ë¡œë“œ ì„±ê³µ í›„, ì„œë²„ì— íŒŒì¼ì˜ ìƒíƒœë¥¼ `COMPLETE`ë¡œ ë³€ê²½í•´ë‹¬ë¼ê³  ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

[[response-codes]]
== ğŸ“„ íŒŒì¼ ê´€ë ¨ ì‘ë‹µ ì½”ë“œ (F01)

|===
| ê¸°ëŠ¥ ì½”ë“œ | ì„¤ëª…

| `FILE_IMAGE_UPLOAD` | ì´ë¯¸ì§€ ì—…ë¡œë“œë¥¼ ìœ„í•œ Presigned URL ë°œê¸‰ ì„±ê³µ
|===

== âœ¨ API ë¬¸ì„œ

=== 1. í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œ URL ìš”ì²­
''''
*Description* +

ì‚¬ìš©ì í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œë¥¼ ìœ„í•œ Presigned URLì„ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤.

- *HTTP Method*: `POST`
- *Endpoint*: `/files/image/profile`

*REQUEST* +
include::{snippets}/image-file-controller-rest-docs-test/get-profile-upload-url_success/http-request.adoc[]
include::{snippets}/image-file-controller-rest-docs-test/get-profile-upload-url_success/request-fields.adoc[]

*RESPONSE* +
include::{snippets}/image-file-controller-rest-docs-test/get-profile-upload-url_success/response-fields.adoc[]
include::{snippets}/image-file-controller-rest-docs-test/get-profile-upload-url_success/http-response.adoc[]

''''

=== 2. ì±„íŒ… ì´ë¯¸ì§€ ì—…ë¡œë“œ URL ìš”ì²­
''''
*Description* +

ì±„íŒ…ë°©ì—ì„œ ì‚¬ìš©í•  ì´ë¯¸ì§€ ì—…ë¡œë“œë¥¼ ìœ„í•œ Presigned URLì„ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤.

- *HTTP Method*: `POST`
- *Endpoint*: `/files/image/chat`
- *Requires Authentication*: Yes

*REQUEST* +
include::{snippets}/image-file-controller-rest-docs-test/get-chat-upload-url_success/http-request.adoc[]
include::{snippets}/image-file-controller-rest-docs-test/get-chat-upload-url_success/request-fields.adoc[]

*RESPONSE* +
include::{snippets}/image-file-controller-rest-docs-test/get-chat-upload-url_success/response-fields.adoc[]
include::{snippets}/image-file-controller-rest-docs-test/get-chat-upload-url_success/http-response.adoc[]
